<!DOCTYPE html>
<html>
  <head>
    <title>Post-introduction to React</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="trabe-slide-pack.css">
  </head>
  <body>

<textarea data-slide-pack>

-- trabe

# Post-introduction to React

--

# Nuestro affaire con React, 2 años después.

--

Chechuuuuuuuuuuuuuuuuuuu and burrú @ Trabe


--

# React itro recap

--


# UI Library

UI = f(state)

--

# Virtual DOM

Virtual DOM diagram

-- code

# JSX

```
JSX
vs

expansión funcional
```

-- code

# Stateless components

```
ejemplo, con props y chilrend
```

-- code

# Stateful components

```
ejemplo con props children y set state
```

--

# Ciclo de vida

la lista ordenada de callbacks

-- code

# Ciclo de vida

```
Ejemplo. componentDidMount -> state loading -> falsapromesacon un timeout xDthen(loaded false)

```

--

## OK, so... now what?

 ![](assets/lost-kid.gif)

 <!-- Contexto. Trabe usa React. Y lo usa en proyectos de verdad y se come los marrones que toquen.-->

-- problem

# We'll talk about real problems

--

# And see how to solve them with React

-- gotchas

# Be aware of the gotchas

## Handle with care

--

## From "easy peasy"
 to
## "total mind fuck!"

![](assets/mind-blown.gif)

--

# Example code

![A panda coded this](assets/panda.gif)

[trabe-teaching/post-intro-react-examples](https://github.com/trabe-teaching/post-intro-react-examples)

--

LOGO de storybook

Using storybook

Screenshot para explicar la barra lateral

(poner en un solo nivel)


-- problem

# Fine control the render cycle

-- code

# Optimize render

```
Ej.
 shouldComponentUpdate
```

## Inmutability FTW: Identity check vs deep equality

-- code

# Rerender stateful components on props change

```
ej.
willReceiveProps
```

## Check for relevant properties


-- code

# Update state using previous

```
setState((prevState, props) => ({ counter: prevState.counter + 1 });
```

-- code

# Ensure state is updated

```
ej.
setState({ a : 1 }, () => callback);
console.log(this.state.a) // who knows;

```

-- code

# Ensure state is updated

```
ej. como antes pero con componentDidUpdate

```








--

![](http://pbs.twimg.com/media/CV-axvvXAAA1TCT.jpg:large)





























-- problem

# Como se hace un formulario

-- code

# Controlled components

```
ej.
```

-- code

# Uncontrolled components & refs API

```
ej.
```

--

# When to use refs

1) Manipular DOM. -> Animaciones . ejemplo de higlighlight

2) Componentes no controlados propios ->
   Forzar actualizaciones, etc, de  padres a hijos. Via refs, decirle al comonente que flashea que flashee xD
   Notificaciones de hijos a padres! -> Reseteable form (api refs para fijar un nuevo value). 




-- gotcha


# rompemos el flujo de react
Imperativo vs declarativo
API de refs util para mentalidades imperativas xD

OJO -> Refs a componentes no a nodos DOM (mover para otro lado):

Problema. Wrapping y delegación de refs :(

ej. refs rotas.



-- problem

# How do I pass props to deep nested components?

-- code

```javascript
const T = ({ locale, key }) =>
  <span>{key}-{locale}</span>;

const Layout = ({ locale, children }) => (
  <div>
    <h1><T key="app.title"/></h1>
    {children}
  </div>
);

const App = ({ locale }) => (
  <Layout>
    <T locale="locale" key="page.title" />
  </Layout>
);

<App locale="es" />

```

--

# Context API

-- code

```
Ejemplo locale
```
--


--




-- problem

# Extract common concerns

--

HOCs

-- code

Layout de HOC componente fucional

-- code

HOC Clase.

--

Ej. de verdad

--

Recompose
--

Lista de métods

--

Mini ejemplo

HOC -> Inject locale

-- problem

# How do I detect context changes


--

You can't...

--

Suscripción al contexo. ej.
Cambio de locale. Oh wau



--

import { connect } from "react-redux";

Connect. The most famous HOC around


--

# Challenge

Code your own Redux

--

Store - State (subscription mechanism)
Provider - Context Provider
connect - HOC

ejemplo: poor man redux


-- problem

# Inject dependecneies

--

API Children. Inyección de deps.

Pasar info de padres a hijos sin usar props, porque no conoces tu hijo.

algo así!

<WithTheme theme="">
{(fgColor, bgColor) => <MyComponent style={color: fgColor, bac

  })
           kground: bgColor} />

</WithTheme>

vs sacar el tema para fuera

--

Contraponer con API de children como alternativa (form inyecta su fiunciójn de reset).
--

Children.clone

children function

-- problem

# Como hago "layout" components

--

* Children:
  * Manipulación de children: estructurar componentes. Magia negra


  <Popup>
    <Header></Header>
    <Content></Content>
    <button>dasdas</button>
    </button
  </Popup>

  </MyShit>
--

  Enfrentearlo a hijos en props

  <Popup header={header} content={content} />
--


-- problem

# Integrate non react stuff

-- code

# Integrate DOM manipulation

```
Refs API again
componentDidMount, componentWillUnmount, ShouldComponentUpdate

```

## jQuery, D3...

--







-- problem

# How do I really Manage my application state

--

Redux! (o mobx)


-- problem

# Testing my components

--

Enzyme + Jests (snapshot testing)

--


# Parting notes

--

# Use, but not abuse

Muchas de estas cosas no se necesitan si se usa un estado global ala Redux
* Ejemplo el contexto puede ser un foco de problemas -> estado global. ESTADO => UI
* Manipular children. Rompe la base.

--

# Update your react

## React 15.5 (deprecation)
### Deprecation madness
## React 16 (Fiber)
### By bye wrappers.

--

Questions?

--

See ya!










</textarea>
    <!-- SlidePack markdown compilation & UI goodies -->
    <script src="slide-pack.js"></script>
  </body>
</html>
